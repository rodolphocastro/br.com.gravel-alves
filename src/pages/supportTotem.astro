---
import SiteLayout from "../layouts/SiteLayout.astro";
import { getCollection } from "astro:content";
import LinkItem from "../components/LinkItem.astro";

const allTotemInfo = await getCollection("supportTotem");
const { Content: About } = await allTotemInfo
  .filter((l) => l.data.order === 0)[0]
  .render();
const links = allTotemInfo.filter((l) => l.data.order !== 0);
---

<SiteLayout>
  <header class="flex flex-col items-center justify-center p-2">
    <h2 class="text-xl mt-1 mb-2">Sobre o Totem</h2>
    <div class="text-sm max-w-[400px] text-center">
      <About />
      <p class="mt-2">Confira abaixo como vocÃª pode arrumar a sua bicicleta</p>
    </div>
  </header>
  <ul class="flex flex-col gap-y-4 py-2 min-w-[400px] sm:px-0 px-4">
    {
      links
        .sort((a, b) => {
          if (a.data.order < b.data.order) {
            return -1;
          }
          if (a.data.order > b.data.order) {
            return 1;
          }
          return 0;
        })
        .map((link) => (
          <LinkItem
            linkTitle={link.data.title}
            linkUrl="https://www.google.com"
          />
        ))
    }
  </ul>
</SiteLayout>
